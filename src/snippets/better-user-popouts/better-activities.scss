$colors: (
  "watching & playing": (
    ">:first-child",
    #5865F2
  ),
  "live": (
    ".detailsWrap-22pigg.textRow-19NEd_[title]",
    #593695
  ),
  "Xbox": (
    ".fullWidth-1orjjo > .contents-18-Yxp > .flex-1u2qrf",
    #107C10
  ),
  "Spotify": (
    ".timeBarUserPopout-AWPFf2",
    #1DB954
  ),
);
@each $type, $stuff in $colors {
  $class: nth($stuff, 1);
  $col: nth($stuff, 2);
  .newPopoutActivityStyles {
    #{$class} {
      &::after {
        content: "";
        position: absolute;
        z-index: -1;
        inset: var(--inset);
        border-radius: 4px;
        background-color: $col;
        box-shadow: 4px 4px 0 color.adjust($col, $saturation: -15%, $lightness: -10%);
      }
    }
  }
}

#app-mount {
  .ShowAllActivities-wrapper-wrapper {
    position: relative;
    isolation: isolate;
    margin-bottom: calc((var(--inset) - 2px) * -1);
    --inset: -10px;
    &::after {
      content: "";
      position: absolute;
      z-index: -1;
      inset: calc(var(--inset) - 2px);
      margin-bottom: inherit;
      border-radius: 4px;
      background-color: var(--background-secondary-alt);
      box-shadow: 4px 4px 0 var(--background-tertiary);
    }
  }
  .ShowAllActivities-wrapper-controls {
    margin: 0 0 12px;
    background-color: var(--background-tertiary);
    box-shadow: 4px 4px 0 var(--background-floating);
  }
}
.newPopoutActivityStyles {
  isolation: isolate;
  margin: 8px;
  padding-bottom: 0;
  margin-bottom: 24px;
  --inset: -12px;

  // improve text color
  #app-mount & {
    .content-3JfFJh span {
      color: inherit;
    }
    .content-3JfFJh,
    .content-3JfFJh div {
      color: #ededed;
    }
    .content-3JfFJh h3,
    .content-3JfFJh a,
    .headerText-1HLrL7 {
      color: white;
    }
  }

  // make buttons be nicer
  .buttonSize-AQY2mE.lookFilled-1Gx00P {
    border: 1px solid currentColor;
    color: #fff;
    background-color: transparent;
    transition: background-color .17s ease;
    &:active {
      background-color: hsla(0, 0%, 100%, .1);
    }
    &:hover,
    &:disabled {
      background-color: transparent;
    }
  }

  // remove spotify icon
  [src="/assets/eaeac24163b35f7526704a3d9b3c7722.svg"] {
    display: none !important;
  }

  // fix xbox
  .button-38aScr {
    position: static;
    .platformIcon-2L1fux {
      display: none;
    }
  }
}
